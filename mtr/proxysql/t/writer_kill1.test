# 1. Setup 3 node PXC cluster
# 2. Setup ProxySQL 
#  node_1: reader/backup wrtier weight 1000
#  node_2: writer
#  node_3: reader/backup writer weight 999
# 3. Setup ProxySQL scheduler with config passed in $proxysql_scheduler_config
# 4. shutdown writer
#   => node_3 promoted to writer, stays reader
#   => node_2 status changed to SHUNED, node moved to hostgroup 9100
# 5. relaunch writer
#   => node_3 still writer and reader because there is no FailBack
#   => node_2 status changed to ONLINE, node removed from hostgroup 9100, node added to reader hostrgroup 101

--let $proxysql_scheduler_config = writer_is_reader.toml
--let $node_1_bwr_priority = 1
--let $node_2_bwr_priority = 2
--let $node_3_bwr_priority = 3

--source writer_kill.inc
